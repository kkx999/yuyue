# 📅 轻量级在线预约系统 (Lightweight Appointment System)

一个基于 PHP + MySQL 构建的现代化在线预约系统。拥有高颜值的前端界面（支持深色模式）、强大的后台管理面板、可视化限额控制以及一键安装向导。

![PHP](https://img.shields.io/badge/PHP-7.4%2B-blue) ![MySQL](https://img.shields.io/badge/MySQL-5.7%2B-orange) ![License](https://img.shields.io/badge/License-MIT-green)

## ✨ 主要功能

### 📱 前端 (用户端)
* **现代化 UI 设计**：采用高对比度、加粗字体风格，清晰易读。
* **🌓 深色模式 (Dark Mode)**：支持自动跟随系统或手动切换，智能记忆用户偏好。
* **预约表单**：支持姓名、联系方式（微信/TG）、日期选择及留言备注。
* **公告栏系统**：顶部醒目公告，支持后台开关及内容编辑。
* **智能限额检测**：提交时自动检测当天是否已满员，防止超约。
* **字数统计**：留言框实时显示剩余字数。

### 🛡️ 后台 (管理端)
* **数据可视化**：首页图表展示本月预约走势 (Chart.js)。
* **📅 可视化限额管理**：
    * **日历视图**：直观查看当月每天的“已约/总额”状态（颜色预警：绿/黄/红）。
    * **单日修改**：点击日历格子即可快速修改当天的最大预约人数。
    * **批量设置**：一键设置整月每天的默认限额。
* **预约管理**：查看预约列表（显示用户头像首字）、编辑信息、删除预约。
* **公告设置**：一键开启/关闭前台公告，支持多行文本编辑。
* **安全中心**：支持修改管理员用户名和密码（需验证旧密码）。

### 🚀 系统特性
* **一键安装向导**：访问域名自动跳转安装页，无需手动导入 SQL。
* **安全性**：密码采用 `password_hash` 加密存储，PDO 预处理防止 SQL 注入。
* **轻量级**：核心代码仅几个文件，部署简单，无复杂框架依赖。

## 🛠️ 环境要求

* **PHP**: 7.4 或更高版本 (建议 8.0+)
* **MySQL**: 5.6+ 或 MariaDB
* **Web 服务器**: Nginx / Apache / IIS

## 📦 安装步骤

1.  **下载源码**
    将本项目代码下载并上传至您的网站根目录。

2.  **创建数据库**
    * 登录您的服务器面板（如宝塔、cPanel）或 phpMyAdmin。
    * **新建一个空的数据库**（例如命名为 `yuyue_db`）。
    * 记下数据库名称、用户名和密码。

3.  **运行安装向导**
    * 在浏览器访问您的网站域名（例如 `http://your-domain.com`）。
    * 系统会自动跳转到安装页面 (`install.php`)。
    * 填入第 2 步准备的数据库信息。
    * 设置后台管理员账号和密码。
    * 点击 **“立即安装”**。

4.  **⚠️ 重要：清理文件**
    安装成功后，请务必进入服务器文件管理器，**手动删除 `install.php` 文件**！这是为了防止恶意重置您的数据库。

## 📂 目录结构

```text
yuyue/
├── admin/
│   ├── index.php      # 后台管理面板 (仪表盘、限额、设置)
│   └── login.php      # 后台登录页面
├── config.php         # 数据库配置文件 (安装后自动生成)
├── index.php          # 前端预约主页
├── install.php        # 安装引导程序 (安装后请删除)
└── README.md          # 说明文档

```

## 📝 使用说明

### 进入后台
* 访问 `http://您的域名/admin/`，使用安装时设置的账号密码登录。

### 修改每日限额
1. 进入后台，找到 **“每日限额监控”** 卡片。
2. **批量修改**：点击卡片右上角的“批量设置”，选择月份和数量，应用到全月。
3. **单日修改**：直接点击日历上的具体日期格子，在弹窗中修改当天的名额。

### 开启公告
1. 在后台右侧找到 **“公告设置”**。
2. 打开开关，输入公告内容，点击保存。
3. 前台首页顶部将立即显示橙色公告栏。

## ❓ 常见问题 (FAQ)

**Q: 打开首页提示 `Error: Database not connected`？**
A: 这说明 `config.php` 文件为空或配置错误。
* **解决方法**：删除根目录下的 `config.php` 文件，刷新网页重新进入安装向导。

**Q: 后台登录提示“账号或密码错误”，但我没输错？**
A: 请确保您的 PHP 版本在 7.4 以上。过低的 PHP 版本可能导致哈希加密函数工作异常。

**Q: 安装时提示“无法写入 config.php”？**
A: 这是权限问题。请将网站根目录的权限设置为 `777` (Linux/宝塔环境)，安装完成后建议改回 `755`。

## 📄 开源协议

本项目采用 [MIT License](LICENSE) 开源协议。您可以免费用于个人或商业项目。
